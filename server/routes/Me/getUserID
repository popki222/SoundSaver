const express = require("express")
const router = express.Router()
const Soundcloud = require('soundcloud.ts').default;


const soundcloud = new Soundcloud(process.env.SOUNDCLOUD_CLIENT_ID, process.env.SOUNDCLOUD_OAUTH_TOKEN);

async function fetchUserID(url){
    try {
        const user = await soundcloud.users.get(url);
        return user;
    } catch (error) {
        console.error('Error fetching user:', error);
        return null;
    }   
}


router.get('/id', async (req, res) => {
    try {
        const url = req.query.url
        const user = await fetchUserID(url);
        if(user){
            console.log(user)
        }
    } catch (err) {
        res.status(500).json({error: err})
    }
})

module.exports = router;